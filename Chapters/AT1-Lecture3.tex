%%% Lecture 3

\section{The Homotopy Addition Theorem}

\lecture[The Homotopy Addition Theorem: a theorem which is necessary, but a pain to prove.\newline---\emph{\enquote{When homotopy theory was new, people thought this was obvious and didn't feel the need for a proof, until Eilenberg suggested so.}}]{2021-10-18}

This lecture was given by Tobias Lenz, a PhD student of Schwede. I was late to the class, so most of the notes for this lecture are copied from Qi Zhu's notes, thank you Qi Zhu!

\begin{remark}
There's a standing assumption for all of today's lecture: $\pi_k(S^k)\cong\Z$ for all $1\leq k<n$.
\end{remark}

The main goal of today's lesson is to prove the following theorem.

\begin{theorem}[Homotopy Addition Theorem]
Assume we have $\nn{f}{k}:I^n\to I^n$ such that $f_i|_{\ring I^n}$ is an open embedding and the sets $f_i(\ring I^n)$ are pairwise disjoint. Furthermore, let $g:\pair\to (X,A)$ such that $g(I^n\sm\bigcup_{i=1}^k f_i(\ring I^n))\subset A$. Then
\[[g]=\sum_{i=1}^k(\deg f_i)[g\circ f_i]\]
in $\pi_n\pair^\#$.
\end{theorem}

\begin{remark}
Note that we have $f_i(\de I^n)\cap f_j(\ring I^n)=\emptyset$ for all $i,j$. This will play a (small) role later in the lecture.
\end{remark}

\begin{remark}
Two remarks about the theorem:
\begin{itemize}
    \item When homotopy theory was new, people thought this was obvious and didn't feel the need for a proof until Eilenberg suggested so.
    \item Tobias: \emph{\enquote{I'm not sure if I can finish the proof today but I was promised an award if I do!}}
\end{itemize}
\end{remark}

\input{Pictures/HAT1}\label{fig:HAT1}\medskip

The strategy to prove this theorem is inductive: we want to reduce the problem to the case $k=1$ which is easy.

\begin{definition}
Let $f:\ring I^n\to\ring I^n $ be an open embedding, $p\in\ring I^n$. We have that $f$ induces a commutative diagram:
\begin{center}
    \begin{tikzcd}
    H_n(\ring I^n,\ring I^n\sm\cb{p}) \arrow[r, "i_*"] \arrow[d, "f_*" left] \arrow[dr, "f_*"] & H_n(I^n,I^n\sm\cb{p}) & H_n\pair \arrow[l, "i_*" above] \arrow[d, red, dashed, "d-"] \\
    H_n(f(\ring I^n), f(\ring I^n)\sm\cb{f(p)}) \arrow[r, "i_*" below] & H_n(f(I^n),f(I^n)\sm\cb{f(p)}) & H_n\pair \arrow[l, "i_*" below]
    \end{tikzcd}
\end{center}
\end{definition}
where the maps are all isomorphisms by homotopies and excision, hence they induce the dashed arrow. This is an automorphism of $H_n\pair\cong\Z$ and thus $d=\pm1$. One can show this is independent of $p$, hence we call it the local degree of $f$, and write $\deg(f)=d$.

\begin{lemma}
For $1\leq i\leq k$, let $\Uu_i\subset f_i(\ring I^n)$ be any non-empty open set. Then $g$ is homotopic relative to $I^n\sm f(\mathring{I}^n)$ to a map that sends $f(I^n)\sm\mathcal{U}_i$ to $A$.
\end{lemma}

\begin{remark}
If $[g]=[g']$ in $\pi_n(X,A)^\#$ then $[g\circ f_j]=[g'\circ f_j]$ for all $1\leq j\leq k$.
\end{remark}

\begin{proof}
There is a homotopy relative $\de I^n$ from the identity to a map that sends everything outside of $\ring Q$ to $\de I^n$, where $Q$ is a cube inside $f^{-1}_i(\mathcal{U}_i)$ (basically we take a cube $Q$ inside $f^{-1}_i(\mathcal{U}_i)$ and we blow it to the big cube $\de I^n$ containing $f^{-1}_i(\mathcal{U}_i)$). Composing with $gf_i$ yields a homotopy $H$ of maps of pairs $(I^n,\de I^n)\to(X,A)$ from $gf_i$ to a map that sends everything outside $\ring Q$ to $A$. We have a map of sets:
\[H':I^n\times I\to X,\quad H'(x,t)=\begin{cases}H(f^{-1}(x),t) & x\in f_i(I^n) \\ g(x) & x\not\in f_i(\mathring{I}^n)\end{cases}\]
which we can show is well defined. Let $x\in f_i(\de I^n)$, with preimage $y$, then\normalmarginpar\marginnote{\footnotesize It suffices to check this because $f_i(\de I^n)\cap f_j(\ring I^n)$ is empty for all $i,j$.} \[g(x)=H(y,t)=H(y,0)=gf_i(y)\] so that it is well defined as a map of sets. Then $H'(x,0)=g(x)$ and $H'(x,1)\in A$ for $x\not\in f(\mathring{Q})$, in particular $H'(x,1)\in A$ for $x\not\in\mathcal{U}_i$. It remains to prove that $H'$ is continuous.

Claim. We have a pushout
\begin{center}
    \begin{tikzcd}
    \de I^n\times I \arrow[d, "i"] \arrow[r, "f_i|_{\de I^n}\times\id"] & (I^n\sm f_i(\ring I^n))\times I \arrow[d] \\
    I^n\times I \arrow[r] & (I^n\times I)\amalg_{\de I^n\times I^n} ((I^n\sm f_i(\mathring{I}^n))\times I)
    \end{tikzcd}
\end{center}
Then,
\[(I^n\times I)\amalg_{\de I^n\times I^n} ((I^n\sm f_i(\mathring{I}^n))\times I)\xto{(f_i\times\id,i)} I^n\times I\]
is a homeomorphism.

\begin{claimproof}
Well-definedness and continuity of the function follow from the universal property of the pushout. One can check that it is is bijective by a direct computation. Hence we have a continuous bijection from a quasi-compact space to an Hausdorff space, which is then a homeomorphism. 
\end{claimproof}

Thus to show that $H'$ is continuous, it suffices to show that the maps $H'\circ (f_i\times I)$ and $H'|_{(I^n\sm f(\ring I^n))\times I}$ are continuous, which follows from the construction.\todo{Not sure how this works, to be honest}
\end{proof}

\begin{proof}[Proof of the homotopy addition theorem]\renewcommand{\qedsymbol}{\textit{To be continued...}} Induction on $k$.

$(k=1)$ Take a cube $Z_1\subset f_i(\mathring{I}^n)$. By the lemma we may assume that $g(I^n\sm\mathring{Z}_1)\subset A$. Our goal is to construct some $f_1':(I^n,\de I^n)\to(I^n,\de I^n)$ with $[gf_1]=[gf_1']$. There exists\normalmarginpar\marginnote{\footnotesize The homotopy $Q$ is the same kind of "pushing out" homotopy that we already considered in the proof of the lemma.} a homotopy $Q$ from $\id_{I^n}$ to a map $p$ such that:
\begin{itemize}
    \item $p|_{Z_1}=\id_{Z_1}$
    \item $p(I^n\sm\mathring{Z}_1)\subset\de I^n$
    \item $Q((I^n\sm\mathring{Z}_1)\times I)\subset I^n\sm \mathring{Z}_1$
\end{itemize}
Now, $Qf_1$ is a homotopy of maps of pairs $(I^n,\de I^n)\to(I^n,I^n\sm\mathring{Z}_1)$. Then $gQf_1$ will be a homotopy of maps of pairs $(I^n,\de I^n)\to(X,A)$, hence $[gpf_1]=[gf_1]$ in $\pi_n(X,A)^\#$. Then $f_1':= pf_1$ is a map of pairs $(I^n,\de I^n)\to(I^n,\de I^n)$ and $f_1\simeq f_1'$ as maps of pairs $(I^n,\de I^n)\to(I^n,I^n\sm \mathring{Z}_1)$.

Claim.\reversemarginpar\marginnote{\footnotesize We are dealing with two different notions of degree, the usual one for $f'_1$ and the local degree for $f_1$.} $\deg f_1$ equals the degree of $f_1'$ as a map $(I^n,\de I^n)\to(I^n,\de I^n)$.

\begin{claimproof}
Consider the diagram:
\begin{center}
    \begin{tikzcd}[column sep=small]
    H_n(\mathring{I}^n,\mathring{I}^n\sm\cb{x}) \arrow[r, "i_*",] \arrow[d, "(f_1)_*" left] & H_n(I^n,I^n\sm\cb{x}) \arrow[d, "(f_1)_*"] & H_n(I^n,\de I^n) \arrow[l, "i_*" above] \arrow[d, shift left, "(f_1)_*\ \," left] \arrow[d, shift right, "\ \,(f'_1)_*" right] \arrow[dr, "(f'_1)_*"] \\
    H_n(\mathring{I}^n, \mathring{I}^n\sm\cb{f_1(x)}) \arrow[r, "i_*"] & H_n(I^n,I^n\sm\cb{f_1(x)}) & H_n(I^n,I^n\sm \mathring{Z}_1) \arrow[l, "i_*" above] & H_n\pair \arrow[l, "i_*"]
    \end{tikzcd}
\end{center}
we have that the parallel arrows agree, which proves the claim.
\end{claimproof}

Now, if $\deg f_1=1$, then $f_1'\simeq\id$ as maps of pairs, hence $(\deg f_1)[gf_1]=[gf_1']=[g]$.

If instead $\deg f_1=-1$, then $f_1'\sim r$ where $r$ is reflection in the first coordinate by lemma \ref{lemma:degree-of-sphere-self-maps}, hence $[g]=-[gr]=-[gf_1']=-[gf_1]=(\deg f_1)[gf_1]$.

\end{proof}
